<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mental Rotation Task (R / Mirror)</title>
  <meta name="color-scheme" content="dark light">
  <style>
    html, body {
      margin:0; padding:0; height:100%;
      background:#000; color:#fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap {
      min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center;
    }
    .screen { display:none; text-align:center; padding:20px; max-width:900px; }
    .screen.active { display:block; }
    .button {
      appearance:none; border:0; border-radius:10px; padding:12px 20px; margin:10px; cursor:pointer;
      background:#fff; color:#000; font-weight:700; font-size:16px;
    }
    .button:disabled { opacity:.5; cursor:not-allowed; }
    .muted { color:#bbb; font-size:14px; }
    .row { display:flex; gap:40px; align-items:center; justify-content:center; flex-wrap:wrap; }
    canvas { background:transparent; display:block; width:300px; height:300px; }
    .progress { position:fixed; top:10px; right:10px; color:#aaa; font-size:14px;}
    .legend { margin-top:16px; color:#ddd; font-size:16px; }
    .feedback { font-size:28px; font-weight:800; margin-top:10px; }
    .kbd { display:inline-block; padding:3px 8px; border:1px solid #888; border-radius:6px; font-family:monospace; }
  </style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <div class="wrap">

    <!-- Welcome / Instructions -->
    <div class="screen active" id="welcome">
      <h1 style="margin-bottom:8px;">Mental Rotation Task</h1>
      <p>Two letters appear side-by-side. Decide if they are the <strong>same</strong> (non-mirror) or a <strong>mirror</strong> pair.</p>
      <div class="legend">
        Respond with <span class="kbd">←</span>/<span class="kbd">F</span> = <strong>Same</strong>, 
        <span class="kbd">→</span>/<span class="kbd">J</span> = <strong>Mirror</strong>
      </div>
      <div style="margin:18px 0 6px">Practice comes first (brief feedback), then the main task.</div>
      <div class="muted">Black background, bold white “R”s for high contrast.</div>

      <div style="margin-top:20px">
        <button class="button" id="start-btn">Start Practice</button>
      </div>

      <div class="muted" style="margin-top:20px" id="id-line"></div>
    </div>

    <!-- Trial screen -->
    <div class="screen" id="trial">
      <div class="row">
        <canvas id="left" width="300" height="300"></canvas>
        <canvas id="right" width="300" height="300"></canvas>
      </div>
      <div class="legend">
        <span class="kbd">←</span>/<span class="kbd">F</span> Same &nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp; 
        <span class="kbd">→</span>/<span class="kbd">J</span> Mirror
      </div>
      <div class="feedback" id="fb" style="min-height:38px;"></div>
    </div>

    <!-- Completion -->
    <div class="screen" id="done">
      <h2>All done—thank you!</h2>
      <p id="summary"></p>
      <button class="button" id="download">Download CSV (optional backup)</button>
    </div>

  </div>

  <!-- Config first, then logic -->
  <script src="config.js"></script>
  <script src="mrt.js"></script>
</body>
</html>
